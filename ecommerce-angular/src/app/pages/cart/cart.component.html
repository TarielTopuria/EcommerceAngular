<section class="cart">
  <h2>Your Cart</h2>

  <ng-container *ngIf="cartItems.length > 0; else emptyState">
    <div class="cart-list">
      <div class="cart-row cart-header">
        <div class="cart-cell product">Product</div>
        <div class="cart-cell price">Price</div>
        <div class="cart-cell quantity">Quantity</div>
        <div class="cart-cell subtotal">Subtotal</div>
        <div class="cart-cell actions">Actions</div>
      </div>

      <div class="cart-row" *ngFor="let item of cartItems; trackBy: trackByProductId">
        <div class="cart-cell product">{{ item.product.title }}</div>
        <div class="cart-cell price">${{ item.product.price | number:'1.2-2' }}</div>
        <div class="cart-cell quantity">
          <input type="number" min="1" [(ngModel)]="item.quantity" (ngModelChange)="onQuantityChange(item)" />
        </div>
        <div class="cart-cell subtotal">${{ getItemSubtotal(item) | number:'1.2-2' }}</div>
        <div class="cart-cell actions">
          <button type="button" (click)="removeItem(item.product.id)">Remove</button>
        </div>
      </div>
    </div>

    <div class="cart-total">
      <span>Total:</span>
      <strong>${{ totalPrice | number:'1.2-2' }}</strong>
    </div>
  </ng-container>

  <ng-template #emptyState>
    <p class="empty">Your cart is empty.</p>
  </ng-template>
</section>
